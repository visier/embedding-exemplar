<!-- 
    This file is part of visier-embedding-exemplar.

    visier-embedding-exemplar is free software: you can redistribute it and/or modify
    it under the terms of the Apache License, Version 2.0 (the "License").

    visier-embedding-exemplar is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
    Apache License, Version 2.0 for more details.

    You should have received a copy of the Apache License, Version 2.0
    along with visier-embedding-exemplar. If not, see <https://www.apache.org/licenses/LICENSE-2.0>. 
 -->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Embedding Exemplar - Home</title>
    <link type="text/css" rel="stylesheet" href="main.css">
</head>
<body>
<main>
    <div id="title-container" class="center-text">
        <h1 class="title">Visier Embedding Exemplar</h1>
        <h3 class="subtitle">Sign in to the partner application.</h3>
    </div>
    <form method="post" id="login-form">
        <div class="form-input">
            <label for="id">Username</label>
            <input type="text" id="id" name="id"/>
        </div>
        <div class="form-input">
            <label for="userEmail">Email</label>
            <input type="text" id="userEmail" name="userEmail"/>
        </div>
        <div class="form-input">
            <label for="displayName">Display Name</label>
            <input type="text" id="displayName" name="displayName"/>
        </div>
        <div class="form-input">
            <label for="tenantCode">Tenant Code</label>
            <input type="text" id="tenantCode" name="tenantCode"/>
        </div>
        <div class="form-buttons">
            <input id="embed-chart-submit" type="submit" formaction="./signin/embed-chart.html" value="Embed a Visier Chart"/>
            <input id="embed-application-submit" type="submit" formaction="./signin/embed-application.html" value="Embed the Visier Application"/>

            <input id="query-param-input" type="hidden" name="queryParams" value="" />
            <input id="query-param-submit" type="submit" formaction="./signin/embed-application.html" value="Sign in" style="display: none;"/>
        </div>
    </form>
    <script>
        // Check to see if we were redirected here from a click-through link that a user clicked on without being signed in.
        // If so, forward click-through link params to the next page and change the form inputs. Consult the README or
        // the Embedded Docs for more details.
        const queryParams = new URLSearchParams(window.location.search).toString();
        console.log(queryParams);
        if (queryParams) {
            hideSubmits("embed-application-submit", "embed-chart-submit");
            showSubmits("query-param-submit");
            document.getElementById("query-param-input").value = queryParams;
        }

        function hideSubmits(...submitIds) {
            submitIds.forEach(submitId => document.getElementById(submitId).style.display = "none")
        }

        function showSubmits(...submitIds) {
            submitIds.forEach(submitId => document.getElementById(submitId).style.display = "inline-block")
        }
    </script>
</main>
</body>
</html>
